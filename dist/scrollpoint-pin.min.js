/*!
 * angular-ui-scrollpoint-pin
 * https://github.com/TechNaturally/ui-scrollpoint-pin
 * Version: 1.2.1 - 2016-01-01T00:55:26.520Z
 * License: MIT
 */
!function(){"use strict";angular.module("ui.scrollpoint.pin",["ui.scrollpoint"]).directive("uiScrollpointPin",[function(){return{restrict:"A",require:["uiScrollpoint","uiScrollpointPin"],controller:[function(){var t=this;this.$element=void 0,this.$placeholder=void 0,this.$uiScrollpoint=void 0,this.edge=void 0,this.offset={};var e={},i=!1;this.repositionPinned=function(){if(t.$placeholder&&t.$uiScrollpoint){var e=t.$uiScrollpoint.hasTarget?0:t.$uiScrollpoint.getScrollOffset();t.$element.css("left",t.offset.x+"px"),t.$element.css("top",e-t.offset.y+"px")}},this.setElement=function(t){this.$element=t},this.setScrollpoint=function(t){this.$uiScrollpoint=t},this.pin=function(o,l){if(!this.$placeholder&&this.$element&&this.$uiScrollpoint){if(this.offset.x=this.$element[0].offsetLeft,this.offset.y=this.$uiScrollpoint.getScrollOffset()-this.$element[0].offsetTop-l*("bottom"==o?-1:1),this.$placeholder=this.$element.clone(),this.$placeholder.addClass("placeholder"),this.$placeholder.css("visibility","hidden"),this.$element.after(this.$placeholder),i=this.$uiScrollpoint.hasTarget&&this.$uiScrollpoint.$target!=this.$element.parent()){var s=this.$element[0].getBoundingClientRect(),n=this.$uiScrollpoint.$target[0].getBoundingClientRect();this.offset.x=s.left,this.offset.y=-this.$uiScrollpoint.$target[0].offsetTop-(s.top-n.top+l),"bottom"==o&&(this.offset.y=-this.$uiScrollpoint.$target[0].offsetTop-this.$uiScrollpoint.$target[0].offsetHeight+this.$element[0].offsetHeight-(s.bottom-n.bottom-l)),this.$uiScrollpoint.$target.append(this.$element)}e.position=this.$element[0].style.position,e.top=this.$element[0].style.top,e.left=this.$element[0].style.left,e.width=this.$element[0].style.width,this.$element.css("width",this.$element[0].offsetWidth+"px"),this.$element.addClass("pinned"),this.$element.css("position","absolute"),this.edge=o,this.$uiScrollpoint.$target.on("scroll",t.repositionPinned),t.repositionPinned()}},this.unpin=function(){if(this.$placeholder&&this.$element&&this.$uiScrollpoint){this.$uiScrollpoint.$target.off("scroll",t.repositionPinned),this.$element.removeClass("pinned");for(var o in e)this.$element.css(o,e[o]);i&&this.$placeholder.after(this.$element);{this.edge}this.edge=void 0,this.offset={},this.$placeholder.remove(),this.$placeholder=void 0,this.$uiScrollpoint.cachePosition()}}}],link:function(t,e,i,o){var l=o[0],s=o[1];s.setElement(e),s.setScrollpoint(l),i.$observe("uiScrollpointEnabled",function(e){e=t.$eval(e),e||s.unpin()}),l.addAction(function(t,e,i){t>=0&&!s.$placeholder?s.pin(i,t):0>t&&s.$placeholder&&s.unpin()})}}}])}();